"use strict";(self.webpackChunkspa_ws_lab=self.webpackChunkspa_ws_lab||[]).push([[739],{2739:(M,d,a)=>{a.r(d),a.d(d,{RegisterComponent:()=>y});var e=a(4438),u=a(177),l=a(4341),f=a(1626),c=a(4796);function g(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"Requerido"),e.k0s())}function p(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"Requerido"),e.k0s())}function h(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"Requerido"),e.k0s())}function b(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"Email inv\xe1lido"),e.k0s())}function _(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"M\xednimo 6 caracteres"),e.k0s())}function v(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"No coincide"),e.k0s())}function w(s,i){1&s&&(e.j41(0,"small",46),e.EFF(1,"Requerido"),e.k0s())}function F(s,i){if(1&s&&(e.qex(0),e.nrm(1,"img",47),e.bVm()),2&s){const r=e.XpG();e.R7$(),e.Y8G("src",r.imagePreview,e.B4B)}}function k(s,i){1&s&&(e.qSk(),e.j41(0,"svg",48),e.nrm(1,"path",49),e.k0s())}function E(s,i){if(1&s&&(e.j41(0,"small",50),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.JRh(r.selectedFile.name)}}function R(s,i){1&s&&(e.j41(0,"small",51),e.EFF(1,"Ning\xfan archivo seleccionado"),e.k0s())}function x(s,i){if(1&s&&(e.j41(0,"small",46),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.JRh(r.imageError)}}function j(s,i){if(1&s&&(e.j41(0,"span",52),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.JRh(r.successMsg)}}function C(s,i){if(1&s&&(e.j41(0,"span",53),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.JRh(r.errorMsg)}}let y=(()=>{class s{constructor(){this.fb=(0,e.WQX)(l.ok),this.auth=(0,e.WQX)(c.u),this.loading=!1,this.successMsg="",this.errorMsg="",this.selectedFile=null,this.imagePreview=null,this.imageError="",this.form=this.fb.group({cedula:["",[l.k0.required]],name:["",[l.k0.required]],lastName:["",[l.k0.required]],email:["",[l.k0.required,l.k0.email]],password:["",[l.k0.required,l.k0.minLength(6)]],confirmPassword:["",[l.k0.required]],address:["",[l.k0.required]],profile:[null]},{validators:[this.passwordsMatchValidator]})}passwordsMatchValidator(r){const o=r.get("password")?.value,t=r.get("confirmPassword")?.value;return o&&t&&o!==t?{passwordsMismatch:!0}:null}get f(){return this.form.controls}onFileChange(r){if(r.files&&r.files.length){const o=r.files[0];this.imageError="";const t=o.type.startsWith("image/"),n=o.size<=2097152;if(!t)return this.resetImageSelection(),void(this.imageError="El archivo debe ser una imagen.");if(!n)return this.resetImageSelection(),void(this.imageError="La imagen supera los 2MB.");this.selectedFile=o,this.form.patchValue({profile:o}),this.form.get("profile")?.updateValueAndValidity();const m=new FileReader;m.onload=()=>{this.imagePreview=m.result},m.readAsDataURL(o)}else this.resetImageSelection()}resetImageSelection(){this.selectedFile=null,this.imagePreview=null,this.form.patchValue({profile:null}),this.form.get("profile")?.updateValueAndValidity()}submit(){this.successMsg="",this.errorMsg="",this.form.invalid?this.form.markAllAsTouched():(this.loading=!0,this.auth.register({cedula:this.f.cedula.value||"",name:this.f.name.value||"",lastName:this.f.lastName.value||"",email:this.f.email.value||"",password:this.f.password.value||"",confirmPassword:this.f.confirmPassword.value||"",address:this.f.address.value||""},this.selectedFile).subscribe({next:r=>{this.successMsg=r?.message||"Registro exitoso",this.form.reset(),this.selectedFile=null,this.imagePreview=null,this.loading=!1},error:r=>{this.errorMsg=r.error&&(r.error.message||r.error.error)||r.message||"Error al registrar",this.loading=!1}}))}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["register"]],standalone:!0,features:[e.aNF],decls:85,vars:17,consts:[["noImage",""],["fileInputEl",""],[1,"min-h-screen","flex","items-center","justify-center","p-4","bg-gray-50"],[1,"w-full","max-w-2xl","bg-white","shadow-xl","rounded-xl","p-8","border","border-gray-200"],[1,"flex","flex-col","items-center","mb-6"],[1,"w-10","h-10","bg-blue-600","rounded-full","flex","items-center","justify-center","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.121 17.804A13.939 13.939 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],["novalidate","",1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","cedula","placeholder","0102030405",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["class","text-red-600 mt-1 block",4,"ngIf"],["formControlName","name","placeholder","John",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["formControlName","lastName","placeholder","Doe",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["formControlName","email","type","email","placeholder","john@example.com",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["formControlName","password","type","password",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["formControlName","confirmPassword","type","password",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],["formControlName","address","placeholder","Calle 123",1,"w-full","mt-1","border","border-gray-300","p-3","rounded-lg","shadow-sm","focus:border-blue-500","focus:ring-blue-500"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-4"],[1,"w-24","h-24","rounded-full","border","border-gray-300","bg-gray-100","flex","items-center","justify-center","overflow-hidden"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],["class","text-gray-600 mt-2 block",4,"ngIf"],["class","text-gray-500 mt-1 block",4,"ngIf"],[1,"pt-4"],["type","submit",1,"w-full","bg-blue-600","text-white","font-semibold","py-3","rounded-lg","hover:bg-blue-700","transition","duration-150","disabled:opacity-50","disabled:bg-blue-400","shadow-md",3,"disabled"],[1,"flex","justify-center","mt-4"],["class","text-green-700 text-sm",4,"ngIf"],["class","text-red-700 text-sm",4,"ngIf"],[1,"relative","flex","items-center","pt-4"],[1,"flex-grow","border-t","border-gray-300"],[1,"flex-shrink","mx-4","text-sm","text-gray-500"],[1,"flex","gap-4","justify-center"],[1,"flex","items-center","justify-center","w-full","sm:w-1/2","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","text-sm","font-medium","text-gray-700","hover:bg-gray-50","transition","duration-150"],["viewBox","0 0 48 48",1,"w-5","h-5","mr-3"],["fill","#EA4335","d","M24 9.5c3.54 0 6.71 1.22 9.08 3.03l5.08-5.08C34.6 4.6 29.6 2 24 2 15.34 2 7.78 7.02 4.64 14.17l5.59 4.35C11.5 13.92 17.27 9.5 24 9.5z"],["fill","#4285F4","d","M46.72 24.5c0-.85-.1-1.66-.27-2.45H24v4.61h12.55c-.53 2.87-2.22 5.1-4.75 6.64l4.74 3.69c2.78-2.58 4.41-6.3 4.41-10.89z"],["fill","#FBBC04","d","M9.5 31.5c1.78 1.48 4.09 2.37 6.56 2.37 2.06 0 3.93-.65 5.54-1.7l5.59 4.35c-2.88 2.24-6.44 3.58-10.99 3.58-8.66 0-16.22-5.02-19.36-12.17l5.59-4.35C11.5 13.92 17.27 9.5 24 9.5z"],["fill","#34A853","d","M24 46c5.82 0 10.92-1.92 14.54-5.18l-5.08-5.08C29.69 38.38 27.07 39.5 24 39.5c-4.47 0-8.23-2.91-9.59-6.95l-5.59 4.35C10.78 41.28 16.2 46 24 46z"],["fill","none","d","M0 0h48v48H0z"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-3"],["fill","#1877F2","d","M12 2C6.477 2 2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89h-2.54V12h2.54V9.797c0-2.505 1.492-3.899 3.777-3.899 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.247 0-1.637.779-1.637 1.562V12h2.773l-.443 2.89h-2.33V22C18.343 21.128 22 16.991 22 12c0-5.523-4.477-10-10-10z"],[1,"text-red-600","mt-1","block"],["alt","Previsualizaci\xf3n de perfil",1,"w-full","h-full","object-cover",3,"src"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-gray-600","mt-2","block"],[1,"text-gray-500","mt-1","block"],[1,"text-green-700","text-sm"],[1,"text-red-700","text-sm"]],template:function(o,t){if(1&o){const n=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),e.qSk(),e.j41(4,"svg",6),e.nrm(5,"path",7),e.k0s()(),e.joV(),e.j41(6,"h1",8),e.EFF(7,"Registro Comunitario"),e.k0s(),e.j41(8,"p",9),e.EFF(9,"Completa tus datos para crear una cuenta"),e.k0s()(),e.j41(10,"form",10),e.bIt("ngSubmit",function(){return e.eBV(n),e.Njj(t.submit())}),e.j41(11,"div",11)(12,"div")(13,"label",12),e.EFF(14,"C\xe9dula"),e.k0s(),e.nrm(15,"input",13),e.DNE(16,g,2,0,"small",14),e.k0s(),e.j41(17,"div")(18,"label",12),e.EFF(19,"Nombre"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,p,2,0,"small",14),e.k0s(),e.j41(22,"div")(23,"label",12),e.EFF(24,"Apellido"),e.k0s(),e.nrm(25,"input",16),e.DNE(26,h,2,0,"small",14),e.k0s(),e.j41(27,"div")(28,"label",12),e.EFF(29,"Email"),e.k0s(),e.nrm(30,"input",17),e.DNE(31,b,2,0,"small",14),e.k0s(),e.j41(32,"div")(33,"label",12),e.EFF(34,"Contrase\xf1a"),e.k0s(),e.nrm(35,"input",18),e.DNE(36,_,2,0,"small",14),e.k0s(),e.j41(37,"div")(38,"label",12),e.EFF(39,"Confirmar contrase\xf1a"),e.k0s(),e.nrm(40,"input",19),e.DNE(41,v,2,0,"small",14),e.k0s()(),e.j41(42,"div")(43,"label",12),e.EFF(44,"Direcci\xf3n"),e.k0s(),e.nrm(45,"input",20),e.DNE(46,w,2,0,"small",14),e.k0s(),e.j41(47,"div")(48,"label",21),e.EFF(49,"Foto de perfil (Imagen, m\xe1x 2MB)"),e.k0s(),e.j41(50,"div",22)(51,"div",23),e.DNE(52,F,2,1,"ng-container",24)(53,k,2,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(55,"div")(56,"input",25,1),e.bIt("change",function(){e.eBV(n);const I=e.sdS(57);return e.Njj(t.onFileChange(I))}),e.k0s(),e.DNE(58,E,2,1,"small",26)(59,R,2,0,"small",27)(60,x,2,1,"small",14),e.k0s()()(),e.j41(61,"div",28)(62,"button",29),e.EFF(63),e.k0s()(),e.j41(64,"div",30),e.DNE(65,j,2,1,"span",31)(66,C,2,1,"span",32),e.k0s(),e.j41(67,"div",33),e.nrm(68,"div",34),e.j41(69,"span",35),e.EFF(70,"o reg\xedstrate con"),e.k0s(),e.nrm(71,"div",34),e.k0s(),e.j41(72,"div",36)(73,"button",37),e.qSk(),e.j41(74,"svg",38),e.nrm(75,"path",39)(76,"path",40)(77,"path",41)(78,"path",42)(79,"path",43),e.k0s(),e.EFF(80," Google "),e.k0s(),e.joV(),e.j41(81,"button",37),e.qSk(),e.j41(82,"svg",44),e.nrm(83,"path",45),e.k0s(),e.EFF(84," Facebook "),e.k0s()()()()()}if(2&o){const n=e.sdS(54);e.R7$(10),e.Y8G("formGroup",t.form),e.R7$(6),e.Y8G("ngIf",t.f.cedula.touched&&t.f.cedula.invalid),e.R7$(5),e.Y8G("ngIf",t.f.name.touched&&t.f.name.invalid),e.R7$(5),e.Y8G("ngIf",t.f.lastName.touched&&t.f.lastName.invalid),e.R7$(5),e.Y8G("ngIf",t.f.email.touched&&t.f.email.invalid),e.R7$(5),e.Y8G("ngIf",t.f.password.touched&&t.f.password.invalid),e.R7$(5),e.Y8G("ngIf",(null==t.form.errors?null:t.form.errors.passwordsMismatch)&&(t.f.confirmPassword.touched||t.f.password.touched)),e.R7$(5),e.Y8G("ngIf",t.f.address.touched&&t.f.address.invalid),e.R7$(6),e.Y8G("ngIf",t.imagePreview)("ngIfElse",n),e.R7$(6),e.Y8G("ngIf",t.selectedFile),e.R7$(),e.Y8G("ngIf",!t.selectedFile),e.R7$(),e.Y8G("ngIf",t.imageError),e.R7$(2),e.Y8G("disabled",t.loading||t.form.invalid),e.R7$(),e.SpI(" ",t.loading?"Registrando...":"Registrar"," "),e.R7$(2),e.Y8G("ngIf",t.successMsg),e.R7$(),e.Y8G("ngIf",t.errorMsg)}},dependencies:[u.MD,u.bT,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,f.q1]})}}return s})()}}]);