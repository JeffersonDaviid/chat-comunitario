"use strict";(self.webpackChunkspa_ws_lab=self.webpackChunkspa_ws_lab||[]).push([[841],{5841:(C,l,s)=>{s.r(l),s.d(l,{DashboardComponent:()=>_});var a=s(177),d=s(1626),e=s(4438);let c=(()=>{class r{constructor(t){this.http=t,this.baseApi="http://localhost:3000/api/auth"}getCommunities(t){return this.http.get(`${this.baseApi}/communities/${t}`)}static{this.\u0275fac=function(n){return new(n||r)(e.KVO(d.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var u=s(4796),m=s(6103);function g(r,i){if(1&r&&e.nrm(0,"img",17),2&r){const t=e.XpG();e.Y8G("src",t.profileUrl(),e.B4B)}}function h(r,i){if(1&r&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI(" ",(t.userName||t.userEmail||"U").charAt(0).toUpperCase()," ")}}function f(r,i){1&r&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div",21),e.j41(3,"p",12),e.EFF(4,"Cargando comunidades..."),e.k0s()()())}function p(r,i){if(1&r&&(e.j41(0,"div",22)(1,"p",23),e.EFF(2),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.JRh(t.errorMsg)}}function b(r,i){1&r&&(e.j41(0,"div",24)(1,"div",25),e.qSk(),e.j41(2,"svg",26),e.nrm(3,"path",27),e.k0s()(),e.joV(),e.j41(4,"h3",28),e.EFF(5,"No hay comunidades"),e.k0s(),e.j41(6,"p",12),e.EFF(7,"A\xfan no perteneces a ninguna comunidad. Contacta con un administrador para unirte."),e.k0s()())}function v(r,i){if(1&r){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){const o=e.eBV(t).$implicit,k=e.XpG(2).$implicit,w=e.XpG(2);return e.Njj(w.goChannel(k.id,o.id))}),e.j41(1,"span",44),e.EFF(2,"#"),e.k0s(),e.j41(3,"div",45)(4,"p",46),e.EFF(5),e.k0s(),e.j41(6,"p",47),e.EFF(7),e.k0s()(),e.qSk(),e.j41(8,"svg",48),e.nrm(9,"path",49),e.k0s()()}if(2&r){const t=i.$implicit;e.R7$(5),e.JRh(t.name),e.R7$(2),e.JRh(t.description)}}function x(r,i){if(1&r&&(e.j41(0,"div",38),e.DNE(1,v,10,2,"button",42),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.channels)}}function y(r,i){1&r&&(e.j41(0,"div",50),e.EFF(1," Sin canales disponibles "),e.k0s())}function F(r,i){if(1&r&&(e.j41(0,"div",31),e.nrm(1,"div",32),e.j41(2,"div",33)(3,"div",34)(4,"div",35),e.EFF(5),e.k0s()(),e.j41(6,"h3",36),e.EFF(7),e.k0s(),e.j41(8,"p",37),e.EFF(9),e.k0s(),e.j41(10,"div",38)(11,"p",39),e.EFF(12),e.k0s(),e.DNE(13,x,2,1,"div",40)(14,y,2,0,"div",41),e.k0s()()()),2&r){const t=i.$implicit;e.R7$(5),e.SpI(" ",t.title.charAt(0).toUpperCase()," "),e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.description),e.R7$(3),e.SpI("Canales (",(null==t.channels?null:t.channels.length)||0,")"),e.R7$(),e.Y8G("ngIf",t.channels&&t.channels.length>0),e.R7$(),e.Y8G("ngIf",!t.channels||0===t.channels.length)}}function j(r,i){if(1&r&&(e.j41(0,"div",29),e.DNE(1,F,15,6,"div",30),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.communities)}}let _=(()=>{class r{constructor(t,n,o){this.community=t,this.auth=n,this.router=o,this.userName="",this.userEmail="",this.userCedula="",this.userProfileImg="",this.communities=[],this.loading=!1,this.errorMsg=""}ngOnInit(){const t=this.auth.getCurrentUser();t&&(this.userName=[t?.name,t?.lastName].filter(Boolean).join(" ").trim(),this.userEmail=t?.email||"",this.userCedula=t?.cedula||"",this.userProfileImg=t?.profileImg||""),this.userCedula?this.fetchCommunities():this.router.navigateByUrl("/login")}profileUrl(){return this.auth.profileUrl(this.userProfileImg)}fetchCommunities(){this.loading=!0,this.community.getCommunities(this.userCedula).subscribe({next:t=>{this.communities=t?.communities||[],this.loading=!1},error:t=>{this.errorMsg=t?.error?.message||"Error cargando comunidades",this.loading=!1}})}goChannel(t,n){this.router.navigate(["/chat",t,n])}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(c),e.rXU(u.u),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-dashboard"]],standalone:!0,features:[e.aNF],decls:23,vars:9,consts:[[1,"h-screen","flex","flex-col","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-8","py-6","shadow-sm"],[1,"flex","items-center","gap-4"],["alt","Perfil","class","w-16 h-16 rounded-lg object-cover border-2 border-gray-200",3,"src",4,"ngIf"],["class","w-16 h-16 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-xl border-2 border-gray-200",4,"ngIf"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","text-sm"],[1,"text-gray-500","text-xs","mt-1"],[1,"flex-1","overflow-y-auto"],[1,"max-w-6xl","mx-auto","px-8","py-8"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6",4,"ngIf"],["class","bg-white rounded-lg p-12 text-center border border-gray-200",4,"ngIf"],["class","grid grid-cols-1 lg:grid-cols-2 gap-6",4,"ngIf"],["alt","Perfil",1,"w-16","h-16","rounded-lg","object-cover","border-2","border-gray-200",3,"src"],[1,"w-16","h-16","rounded-lg","bg-gradient-to-br","from-blue-400","to-blue-600","flex","items-center","justify-center","text-white","font-bold","text-xl","border-2","border-gray-200"],[1,"flex","items-center","justify-center","py-12"],[1,"text-center"],[1,"animate-spin","w-12","h-12","border-4","border-blue-200","border-t-blue-600","rounded-full","mx-auto","mb-4"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"text-red-800","font-medium"],[1,"bg-white","rounded-lg","p-12","text-center","border","border-gray-200"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["class","bg-white rounded-lg border border-gray-200 hover:shadow-lg transition-shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","border","border-gray-200","hover:shadow-lg","transition-shadow","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-blue-600","h-32"],[1,"px-6","pb-6"],[1,"flex","items-start","justify-between","mb-4","-mt-8","relative","z-10"],[1,"w-16","h-16","bg-white","rounded-lg","border-4","border-white","shadow-md","flex","items-center","justify-center","text-2xl","font-bold","text-blue-600"],[1,"text-xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-sm","mb-4"],[1,"space-y-2"],[1,"text-xs","font-semibold","text-gray-700","uppercase","tracking-wide"],["class","space-y-2",4,"ngIf"],["class","text-sm text-gray-500 italic py-2",4,"ngIf"],["class","w-full flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 transition-colors group text-left",3,"click",4,"ngFor","ngForOf"],[1,"w-full","flex","items-start","gap-3","p-3","rounded-lg","hover:bg-blue-50","transition-colors","group","text-left",3,"click"],[1,"text-gray-400","font-semibold"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-900","group-hover:text-blue-600","transition-colors"],[1,"text-xs","text-gray-500","truncate"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-hover:text-blue-600","transition-colors","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-sm","text-gray-500","italic","py-2"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"header",1)(2,"div",2),e.DNE(3,g,1,1,"img",3)(4,h,2,1,"div",4),e.j41(5,"div")(6,"h1",5),e.EFF(7),e.k0s(),e.j41(8,"p",6),e.EFF(9),e.k0s(),e.j41(10,"p",7),e.EFF(11),e.k0s()()()(),e.j41(12,"div",8)(13,"div",9)(14,"div",10)(15,"h2",11),e.EFF(16,"Mis Comunidades"),e.k0s(),e.j41(17,"p",12),e.EFF(18,"Accede a tus comunidades y participa en las conversaciones"),e.k0s()(),e.DNE(19,f,5,0,"div",13)(20,p,3,1,"div",14)(21,b,8,0,"div",15)(22,j,2,1,"div",16),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",o.profileUrl()),e.R7$(),e.Y8G("ngIf",!o.profileUrl()),e.R7$(3),e.JRh(o.userName||o.userEmail||"Usuario"),e.R7$(2),e.JRh(o.userEmail),e.R7$(2),e.SpI("C\xe9dula: ",o.userCedula,""),e.R7$(8),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",o.errorMsg&&!o.loading),e.R7$(),e.Y8G("ngIf",!o.loading&&0===o.communities.length&&!o.errorMsg),e.R7$(),e.Y8G("ngIf",!o.loading&&o.communities.length>0))},dependencies:[a.MD,a.Sq,a.bT,d.q1]})}}return r})()}}]);