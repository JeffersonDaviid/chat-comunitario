"use strict";(self.webpackChunkspa_ws_lab=self.webpackChunkspa_ws_lab||[]).push([[76],{4796:(m,c,r)=>{r.d(c,{u:()=>p});var i=r(8141),n=r(4438),u=r(1626);let p=(()=>{class s{constructor(t){this.http=t,this.baseAuth="http://localhost:3000/api/auth",this.baseFiles="http://localhost:3000"}login(t,e){return this.http.post(`${this.baseAuth}/login`,{email:t,password:e}).pipe((0,i.M)(o=>{const l=o?.data?.user||o?.user||null;l&&this.setSession(l,o?.data?.token||o?.token||"")}))}register(t,e){const a=new FormData;return a.append("cedula",t.cedula||""),a.append("name",t.name||""),a.append("lastName",t.lastName||""),a.append("email",t.email||""),a.append("password",t.password||""),a.append("confirmPassword",t.confirmPassword||""),a.append("address",t.address||""),e&&a.append("profile",e,e.name),this.http.post(`${this.baseAuth}/register`,a)}setSession(t,e){try{e&&localStorage.setItem("auth_token",e),t&&localStorage.setItem("user",JSON.stringify(t)),t?.cedula&&localStorage.setItem("cedula",t.cedula)}catch{}}clearSession(){try{localStorage.removeItem("auth_token"),localStorage.removeItem("user"),localStorage.removeItem("cedula")}catch{}}getCurrentUser(){try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch{return null}}getToken(){try{return localStorage.getItem("auth_token")||""}catch{return""}}profileUrl(t){const e=(t||"").trim();return e?e.startsWith("http")||e.startsWith("data:")?e:`${this.baseFiles}${e.startsWith("/")?e:"/"+e}`:""}static{this.\u0275fac=function(e){return new(e||s)(n.KVO(u.Qq))}}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()}}]);